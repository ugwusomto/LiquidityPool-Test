{"ast":null,"code":"var _jsxFileName = \"/Users/t/Documents/BLOCKCHAIN PROJECT/LiquidityPool-Test/front-end/src/App.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { isEmpty, message, connectWallet, getContract, tokenToWei } from './utils';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setUpUser, setUpWeb3, setUpRigelPool } from './store/action';\nimport { tokens, NETWORKS } from './constants/index';\nimport * as ERC20Tokens from './contracts';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction App() {\n  _s();\n\n  const web3 = useSelector(state => state.web3);\n  const rigelpool = useSelector(state => state.rigelPool);\n  const user = useSelector(state => state.user);\n  const [data, setData] = useState({\n    token1: '',\n    token2: '',\n    amount1: '',\n    amount2: ''\n  });\n  const [images, setImages] = useState({\n    img1: '',\n    img2: ''\n  });\n  const dispatch = useDispatch();\n\n  const connectUser = async e => {\n    e.preventDefault();\n\n    if (isEmpty(web3.instance)) {\n      message('error', 'No web3 instance found');\n      return;\n    }\n\n    try {\n      const userData = await connectWallet(web3.instance);\n\n      if (!isEmpty(userData) && userData.length === 2) {\n        dispatch(setUpUser({\n          provider: userData[0],\n          address: userData[1],\n          status: 'connect'\n        }));\n      }\n    } catch (error) {\n      message('error', error.message);\n    }\n  };\n\n  const disconnectUser = async e => {\n    e.preventDefault();\n\n    if (isEmpty(web3.instance)) {\n      message('error', 'Please install metamask');\n      return;\n    }\n\n    dispatch(setUpUser({\n      status: 'disconnect'\n    }));\n  };\n\n  const tokenSelectHandler = e => {\n    setData({ ...data,\n      [e.target.name]: e.target.value\n    });\n\n    if (e.target.name === 'token1' && !isEmpty(e.target.value)) {\n      setImages({ ...images,\n        img1: tokens[e.target.value].logo\n      });\n    }\n\n    if (e.target.name === 'token2' && !isEmpty(e.target.value)) {\n      setImages({ ...images,\n        img2: tokens[e.target.value].logo\n      });\n    }\n  };\n\n  const addLiquidity = async e => {\n    if (isEmpty(data.token1) || isEmpty(data.token2) || isEmpty(data.amount1) || isNaN(data.amount1) || isNaN(data.amount2) || isEmpty(data.amount2)) {\n      message('error', 'Please Enter/Select Valid Data');\n      return;\n    }\n\n    if (data.token1 === data.token2) {\n      message('error', 'Please Enter/Select Valid Data');\n      return;\n    }\n\n    try {\n      const chainId = isEmpty(tokens[data.token1].address[NETWORKS['ACTIVE'].chainId]) ? 5777 : NETWORKS['ACTIVE'].chainId;\n      const obj = {\n        _token1: tokens[data.token1].address[chainId],\n        _token2: tokens[data.token2].address[chainId],\n        _amount1: data.amount1,\n        _amount2: data.amount2\n      };\n      const token1Obj = await getContract(user.provider, ERC20Tokens[data.token1.toUpperCase()]);\n      const token2Obj = await getContract(user.provider, ERC20Tokens[data.token2.toUpperCase()]);\n      let weiAmount1 = tokenToWei(data.amount1, tokens[data.token1].decimals);\n      let weiAmount2 = tokenToWei(data.amount2, tokens[data.token2].decimals); //check if the user has enough balance for this\n\n      const token1Balance = (await token1Obj.balanceOf(user.address)).toString();\n      const token2Balance = (await token2Obj.balanceOf(user.address)).toString();\n\n      if (parseFloat(weiAmount1.toString()) > parseFloat(token1Balance)) {\n        throw new Error(`You don't have sufficient ${data.token1.toUpperCase()} in your metamask wallet`);\n      }\n\n      if (parseFloat(weiAmount2.toString()) > parseFloat(token2Balance)) {\n        throw new Error(`You don't have sufficient ${data.token2.toUpperCase()} in your metamask wallet`);\n      } //check for allowance\n\n\n      const allowance1 = (await token1Obj.allowance(user.address, rigelpool.address)).toString();\n      const allowance2 = (await token2Obj.allowance(user.address, rigelpool.address)).toString();\n\n      if (allowance1 < weiAmount1) {\n        await token1Obj.approve(rigelpool.address, weiAmount1); // approve contract to spend this wei\n      }\n\n      if (allowance2 < weiAmount2) {\n        await token2Obj.approve(rigelpool.address, weiAmount2); // approve contract to spend this wei\n      }\n\n      const transaction = await rigelpool.instance.connect(user.provider).addLiquidity(obj, {\n        from: user.address\n      });\n      await transaction.wait();\n    } catch (error) {\n      message('error', error.message);\n    }\n  }; //web3 setup\n\n\n  useEffect(() => {\n    const init = async () => {\n      dispatch(setUpWeb3());\n    };\n\n    init();\n    return () => {};\n  }, [dispatch]); //rigelpool setup\n\n  useEffect(() => {\n    const init = async () => {\n      if (isEmpty(web3.loading) && !isEmpty(web3.instance)) {\n        dispatch(setUpRigelPool());\n      }\n    };\n\n    init();\n    return () => {};\n  }, [dispatch, web3]); //user connection\n\n  useEffect(() => {\n    const init = async () => {\n      if (isEmpty(web3.loading) && !isEmpty(web3.instance)) {\n        try {\n          if (!isEmpty(localStorage.getItem('user'))) {\n            const userData = await connectWallet(web3.instance);\n\n            if (!isEmpty(userData) && userData.length === 2) {\n              dispatch(setUpUser({\n                provider: userData[0],\n                address: userData[1],\n                status: 'connect'\n              }));\n            }\n          }\n        } catch (error) {\n          message('error', error.message);\n        }\n      }\n    };\n\n    init();\n    return () => {};\n  }, [dispatch, web3]); //pool update\n\n  useEffect(() => {\n    const init = async () => {\n      console.log(data);\n\n      if (!isEmpty(data.token1) && !isEmpty(data.token2) && !isEmpty(rigelpool)) {\n        const token1 = isEmpty(tokens[data.token1].address[NETWORKS['ACTIVE'].chainId]) ? tokens[data.token1].address[5777] : tokens[data.token1].address[NETWORKS['ACTIVE'].chainId];\n        const token2 = isEmpty(tokens[data.token2].address[NETWORKS['ACTIVE'].chainId]) ? tokens[data.token2].address[5777] : tokens[data.token2].address[NETWORKS['ACTIVE'].chainId];\n        const pairLiquidity = await rigelpool.instance.connect(user.provider).getPairLiquidity(token1, token2, {\n          from: user.address\n        });\n        const providerLiquidity = await rigelpool.instance.connect(user.provider).getProviderLiquidity(token1, token2, {\n          from: user.address\n        });\n        console.log(pairLiquidity, providerLiquidity);\n      }\n    };\n\n    init();\n    return () => {};\n  }, [rigelpool, data]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row pt-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-6\",\n          children: /*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"h4\",\n            children: \"RigelPool\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-6 text-right p-2\",\n          children: [isEmpty(user.address) ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: connectUser,\n            className: \"btn border text-light\",\n            children: \"Connect Wallet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: disconnectUser,\n            className: \"btn btn-danger border text-light\",\n            children: \"Disconnect Wallet\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"mt-2 d-block\",\n            children: [' ', /*#__PURE__*/_jsxDEV(\"b\", {\n              children: \"Address\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 254,\n              columnNumber: 15\n            }, this), \" : \", user.address]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 235,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row pt-5\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"box col-12  col-md-5 offset-md-4 col-lg-5 offset-lg-4 p-0 card shadow \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"header pt-5 pl-4 pr-4 pb-2 row \",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"icon col-2 col-md-1 col-lg-1  p-2\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-arrow-left\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 264,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"content col-7 col-md-8 col-lg-8   pl-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                children: \"Add Liquidity\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: \"Add liquidity to receive LP tokens\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"icon col-2  col-md-2 col-lg-2  p-2\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-cog\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 271,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 270,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"icon col-1  col-md-1 col-lg-1  p-2\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-refresh\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 274,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 273,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"row pl-5 pr-5 pt-4\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group col-md-12 col-sm-12 \",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [!isEmpty(images.img1) ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"img col-2  col-md-2  text-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: images.img1,\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 282,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 281,\n                  columnNumber: 21\n                }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-5 col-md-5 selectBox text-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"select\", {\n                    onChange: tokenSelectHandler,\n                    name: \"token1\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select a currency\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 290,\n                      columnNumber: 23\n                    }, this), Object.keys(tokens).map((data, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: data,\n                      children: tokens[data].symbol\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 292,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 289,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 288,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input row\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"0.0\",\n                  className: \"form-control col-md-12 text-right\",\n                  onChange: tokenSelectHandler,\n                  name: \"amount1\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 300,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 278,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group col-md-12 text-center  \",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fa fa-plus\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 309,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"form-group col-md-12 col-sm-12 \",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row\",\n                children: [!isEmpty(images.img2) ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"img col-2  col-md-2  text-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"img\", {\n                    src: images.img2,\n                    alt: \"\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 21\n                }, this) : '', /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-5 col-md-5 selectBox text-center\",\n                  children: /*#__PURE__*/_jsxDEV(\"select\", {\n                    onChange: tokenSelectHandler,\n                    name: \"token2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                      value: \"\",\n                      children: \"Select a currency\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 323,\n                      columnNumber: 23\n                    }, this), Object.keys(tokens).map((data, index) => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: data,\n                      children: tokens[data].symbol\n                    }, index, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 325,\n                      columnNumber: 25\n                    }, this))]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 322,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 321,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"input row\",\n                children: /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"text\",\n                  placeholder: \"0.0\",\n                  className: \"form-control col-md-12 text-right\",\n                  onChange: tokenSelectHandler,\n                  name: \"amount2\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 312,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 277,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"display row pl-4 pr-4 pb-1 pt-1\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"col-md-12 info pt-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: \"Prices and pool share\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"detail row p-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-6 col-md-4 text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: \"257.525\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"BELT per BNB\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 349,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 347,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-6 col-md-4 text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: \"0.00388312\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 352,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"BNB per BELT\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 353,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 351,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-6 col-md-4 text-center\",\n                  children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                    children: \"0%\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: \"Share of Pool\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 357,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 346,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 343,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-md-12 p-3\",\n            children: isEmpty(user.address) ? /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: connectUser,\n              className: \"btn  d-block mainBtn\",\n              children: \"Connect Wallet\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 364,\n              columnNumber: 17\n            }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: addLiquidity,\n              disabled: isEmpty(data.token1) || isEmpty(data.token2) || isEmpty(data.amount1) || isEmpty(data.amount2) ? 'disabled' : '',\n              className: \"btn  d-block mainBtn\",\n              children: \"Enter an amount\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 368,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 260,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 5\n  }, this);\n}\n\n_s(App, \"ChOGvYOxZKlYu40wIorMARC/UO8=\", false, function () {\n  return [useSelector, useSelector, useSelector, useDispatch];\n});\n\n_c = App;\nexport default App;\n\nvar _c;\n\n$RefreshReg$(_c, \"App\");","map":{"version":3,"sources":["/Users/t/Documents/BLOCKCHAIN PROJECT/LiquidityPool-Test/front-end/src/App.js"],"names":["React","useEffect","useState","isEmpty","message","connectWallet","getContract","tokenToWei","useSelector","useDispatch","setUpUser","setUpWeb3","setUpRigelPool","tokens","NETWORKS","ERC20Tokens","App","web3","state","rigelpool","rigelPool","user","data","setData","token1","token2","amount1","amount2","images","setImages","img1","img2","dispatch","connectUser","e","preventDefault","instance","userData","length","provider","address","status","error","disconnectUser","tokenSelectHandler","target","name","value","logo","addLiquidity","isNaN","chainId","obj","_token1","_token2","_amount1","_amount2","token1Obj","toUpperCase","token2Obj","weiAmount1","decimals","weiAmount2","token1Balance","balanceOf","toString","token2Balance","parseFloat","Error","allowance1","allowance","allowance2","approve","transaction","connect","from","wait","init","loading","localStorage","getItem","console","log","pairLiquidity","getPairLiquidity","providerLiquidity","getProviderLiquidity","Object","keys","map","index","symbol"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport {\n  isEmpty,\n  message,\n  connectWallet,\n  getContract,\n  tokenToWei,\n} from './utils';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { setUpUser, setUpWeb3, setUpRigelPool } from './store/action';\nimport { tokens, NETWORKS } from './constants/index';\nimport * as ERC20Tokens from './contracts';\n\nfunction App() {\n  const web3 = useSelector((state) => state.web3);\n  const rigelpool = useSelector((state) => state.rigelPool);\n  const user = useSelector((state) => state.user);\n  const [data, setData] = useState({\n    token1: '',\n    token2: '',\n    amount1: '',\n    amount2: '',\n  });\n  const [images, setImages] = useState({ img1: '', img2: '' });\n  const dispatch = useDispatch();\n\n  const connectUser = async (e) => {\n    e.preventDefault();\n    if (isEmpty(web3.instance)) {\n      message('error', 'No web3 instance found');\n      return;\n    }\n    try {\n      const userData = await connectWallet(web3.instance);\n      if (!isEmpty(userData) && userData.length === 2) {\n        dispatch(\n          setUpUser({\n            provider: userData[0],\n            address: userData[1],\n            status: 'connect',\n          })\n        );\n      }\n    } catch (error) {\n      message('error', error.message);\n    }\n  };\n\n  const disconnectUser = async (e) => {\n    e.preventDefault();\n    if (isEmpty(web3.instance)) {\n      message('error', 'Please install metamask');\n      return;\n    }\n    dispatch(setUpUser({ status: 'disconnect' }));\n  };\n\n  const tokenSelectHandler = (e) => {\n    setData({ ...data, [e.target.name]: e.target.value });\n    if (e.target.name === 'token1' && !isEmpty(e.target.value)) {\n      setImages({ ...images, img1: tokens[e.target.value].logo });\n    }\n\n    if (e.target.name === 'token2' && !isEmpty(e.target.value)) {\n      setImages({ ...images, img2: tokens[e.target.value].logo });\n    }\n  };\n\n  const addLiquidity = async (e) => {\n    if (\n      isEmpty(data.token1) ||\n      isEmpty(data.token2) ||\n      isEmpty(data.amount1) ||\n      isNaN(data.amount1) ||\n      isNaN(data.amount2) ||\n      isEmpty(data.amount2)\n    ) {\n      message('error', 'Please Enter/Select Valid Data');\n      return;\n    }\n\n    if (data.token1 === data.token2) {\n      message('error', 'Please Enter/Select Valid Data');\n      return;\n    }\n\n    try {\n      const chainId = isEmpty(\n        tokens[data.token1].address[NETWORKS['ACTIVE'].chainId]\n      )\n        ? 5777\n        : NETWORKS['ACTIVE'].chainId;\n      const obj = {\n        _token1: tokens[data.token1].address[chainId],\n        _token2: tokens[data.token2].address[chainId],\n        _amount1: data.amount1,\n        _amount2: data.amount2,\n      };\n      const token1Obj = await getContract(\n        user.provider,\n        ERC20Tokens[data.token1.toUpperCase()]\n      );\n      const token2Obj = await getContract(\n        user.provider,\n        ERC20Tokens[data.token2.toUpperCase()]\n      );\n      let weiAmount1 = tokenToWei(data.amount1, tokens[data.token1].decimals);\n      let weiAmount2 = tokenToWei(data.amount2, tokens[data.token2].decimals);\n\n      //check if the user has enough balance for this\n      const token1Balance = (\n        await token1Obj.balanceOf(user.address)\n      ).toString();\n      const token2Balance = (\n        await token2Obj.balanceOf(user.address)\n      ).toString();\n      if (parseFloat(weiAmount1.toString()) > parseFloat(token1Balance)) {\n        throw new Error(\n          `You don't have sufficient ${data.token1.toUpperCase()} in your metamask wallet`\n        );\n      }\n      if (parseFloat(weiAmount2.toString()) > parseFloat(token2Balance)) {\n        throw new Error(\n          `You don't have sufficient ${data.token2.toUpperCase()} in your metamask wallet`\n        );\n      }\n\n      //check for allowance\n      const allowance1 = (\n        await token1Obj.allowance(user.address, rigelpool.address)\n      ).toString();\n      const allowance2 = (\n        await token2Obj.allowance(user.address, rigelpool.address)\n      ).toString();\n\n      if (allowance1 < weiAmount1) {\n        await token1Obj.approve(rigelpool.address, weiAmount1); // approve contract to spend this wei\n      }\n\n      if (allowance2 < weiAmount2) {\n        await token2Obj.approve(rigelpool.address, weiAmount2); // approve contract to spend this wei\n      }\n      const transaction = await rigelpool.instance\n        .connect(user.provider)\n        .addLiquidity(obj, { from: user.address });\n      await transaction.wait();\n    } catch (error) {\n      message('error', error.message);\n    }\n  };\n\n  //web3 setup\n  useEffect(() => {\n    const init = async () => {\n      dispatch(setUpWeb3());\n    };\n    init();\n    return () => {};\n  }, [dispatch]);\n\n  //rigelpool setup\n  useEffect(() => {\n    const init = async () => {\n      if (isEmpty(web3.loading) && !isEmpty(web3.instance)) {\n        dispatch(setUpRigelPool());\n      }\n    };\n    init();\n    return () => {};\n  }, [dispatch, web3]);\n\n  //user connection\n  useEffect(() => {\n    const init = async () => {\n      if (isEmpty(web3.loading) && !isEmpty(web3.instance)) {\n        try {\n          if (!isEmpty(localStorage.getItem('user'))) {\n            const userData = await connectWallet(web3.instance);\n            if (!isEmpty(userData) && userData.length === 2) {\n              dispatch(\n                setUpUser({\n                  provider: userData[0],\n                  address: userData[1],\n                  status: 'connect',\n                })\n              );\n            }\n          }\n        } catch (error) {\n          message('error', error.message);\n        }\n      }\n    };\n    init();\n    return () => {};\n  }, [dispatch, web3]);\n\n  //pool update\n  useEffect(() => {\n    const init = async () => {\n      console.log(data);\n      if (\n        !isEmpty(data.token1) &&\n        !isEmpty(data.token2) &&\n        !isEmpty(rigelpool)\n      ) {\n        const token1 = isEmpty(\n          tokens[data.token1].address[NETWORKS['ACTIVE'].chainId]\n        )\n          ? tokens[data.token1].address[5777]\n          : tokens[data.token1].address[NETWORKS['ACTIVE'].chainId];\n        const token2 = isEmpty(\n          tokens[data.token2].address[NETWORKS['ACTIVE'].chainId]\n        )\n          ? tokens[data.token2].address[5777]\n          : tokens[data.token2].address[NETWORKS['ACTIVE'].chainId];\n        const pairLiquidity = await rigelpool.instance\n          .connect(user.provider)\n          .getPairLiquidity(token1, token2, { from: user.address });\n        const providerLiquidity = await rigelpool.instance\n          .connect(user.provider)\n          .getProviderLiquidity(token1, token2, { from: user.address });\n        console.log(pairLiquidity, providerLiquidity);\n      }\n    };\n    init();\n    return () => {};\n  }, [rigelpool, data]);\n\n  \n\n  return (\n    <div className=\"wrapper\">\n      <div className=\"container\">\n        <div className=\"row pt-1\">\n          <div className=\"col-6\">\n            <h1 className=\"h4\">RigelPool</h1>\n          </div>\n          <div className=\"col-6 text-right p-2\">\n            {isEmpty(user.address) ? (\n              <button onClick={connectUser} className=\"btn border text-light\">\n                Connect Wallet\n              </button>\n            ) : (\n              <button\n                onClick={disconnectUser}\n                className=\"btn btn-danger border text-light\"\n              >\n                Disconnect Wallet\n              </button>\n            )}\n            <span className=\"mt-2 d-block\">\n              {' '}\n              <b>Address</b> : {user.address}\n            </span>\n          </div>\n        </div>\n      </div>\n      <div className=\"container\">\n        <div className=\"row pt-5\">\n          <div className=\"box col-12  col-md-5 offset-md-4 col-lg-5 offset-lg-4 p-0 card shadow \">\n            <div className=\"header pt-5 pl-4 pr-4 pb-2 row \">\n              <div className=\"icon col-2 col-md-1 col-lg-1  p-2\">\n                <i className=\"fa fa-arrow-left\" />\n              </div>\n              <div className=\"content col-7 col-md-8 col-lg-8   pl-4\">\n                <h3>Add Liquidity</h3>\n                <span>Add liquidity to receive LP tokens</span>\n              </div>\n              <div className=\"icon col-2  col-md-2 col-lg-2  p-2\">\n                <i className=\"fa fa-cog\" />\n              </div>\n              <div className=\"icon col-1  col-md-1 col-lg-1  p-2\">\n                <i className=\"fa fa-refresh\" />\n              </div>\n            </div>\n            <div className=\"row pl-5 pr-5 pt-4\">\n              <div className=\"form-group col-md-12 col-sm-12 \">\n                <div className=\"row\">\n                  {!isEmpty(images.img1) ? (\n                    <div className=\"img col-2  col-md-2  text-center\">\n                      <img src={images.img1} alt=\"\" />\n                    </div>\n                  ) : (\n                    ''\n                  )}\n\n                  <div className=\"col-5 col-md-5 selectBox text-center\">\n                    <select onChange={tokenSelectHandler} name=\"token1\">\n                      <option value=\"\">Select a currency</option>\n                      {Object.keys(tokens).map((data, index) => (\n                        <option key={index} value={data}>\n                          {tokens[data].symbol}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n                <div className=\"input row\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"0.0\"\n                    className=\"form-control col-md-12 text-right\"\n                    onChange={tokenSelectHandler}\n                    name=\"amount1\"\n                  />\n                </div>\n              </div>\n              <div className=\"form-group col-md-12 text-center  \">\n                <i className=\"fa fa-plus\" />\n              </div>\n              <div className=\"form-group col-md-12 col-sm-12 \">\n                <div className=\"row\">\n                  {!isEmpty(images.img2) ? (\n                    <div className=\"img col-2  col-md-2  text-center\">\n                      <img src={images.img2} alt=\"\" />\n                    </div>\n                  ) : (\n                    ''\n                  )}\n                  <div className=\"col-5 col-md-5 selectBox text-center\">\n                    <select onChange={tokenSelectHandler} name=\"token2\">\n                      <option value=\"\">Select a currency</option>\n                      {Object.keys(tokens).map((data, index) => (\n                        <option key={index} value={data}>\n                          {tokens[data].symbol}\n                        </option>\n                      ))}\n                    </select>\n                  </div>\n                </div>\n                <div className=\"input row\">\n                  <input\n                    type=\"text\"\n                    placeholder=\"0.0\"\n                    className=\"form-control col-md-12 text-right\"\n                    onChange={tokenSelectHandler}\n                    name=\"amount2\"\n                  />\n                </div>\n              </div>\n            </div>\n            <div className=\"display row pl-4 pr-4 pb-1 pt-1\">\n              <div className=\"col-md-12 info pt-3\">\n                <h4>Prices and pool share</h4>\n                <div className=\"detail row p-3\">\n                  <div className=\"col-6 col-md-4 text-center\">\n                    <h4>257.525</h4>\n                    <p>BELT per BNB</p>\n                  </div>\n                  <div className=\"col-6 col-md-4 text-center\">\n                    <h4>0.00388312</h4>\n                    <p>BNB per BELT</p>\n                  </div>\n                  <div className=\"col-6 col-md-4 text-center\">\n                    <h4>0%</h4>\n                    <p>Share of Pool</p>\n                  </div>\n                </div>\n              </div>\n            </div>\n            <div className=\"col-md-12 p-3\">\n              {isEmpty(user.address) ? (\n                <button onClick={connectUser} className=\"btn  d-block mainBtn\">\n                  Connect Wallet\n                </button>\n              ) : (\n                <button\n                  onClick={addLiquidity}\n                  disabled={\n                    isEmpty(data.token1) ||\n                    isEmpty(data.token2) ||\n                    isEmpty(data.amount1) ||\n                    isEmpty(data.amount2)\n                      ? 'disabled'\n                      : ''\n                  }\n                  className=\"btn  d-block mainBtn\"\n                >\n                  Enter an amount\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}